{"ast":null,"code":"import { createAction, createActions, handleActions } from 'redux-actions';\nimport createRequestSaga, { createRequestActionTypes } from '../lib/createRequestSaga';\nimport * as postAPI from '../lib/api/posts';\nimport { takeLatest } from 'redux-saga/effects';\nconst INITIALIZE = 'write/INITIALIZE';\nconst CHANGE_FIELD = 'write/CHANGE_FIELD';\nconst SET_ORIGINAL_POST = 'write/SET_ORIGINAL_POST';\nconst [WRITE_POST, WRITE_POST_SUCCESS, WRITE_POST_FAILURE] = createRequestActionTypes('write/WRITE_POST');\nconst [UPDATE_POST, UPDATE_POST_SUCCESS, UPDATE_POST_FAILURE] = createRequestActionTypes('/write/UPDATE_POST');\nexport const initialize = createAction(INITIALIZE);\nexport const changeField = createAction(CHANGE_FIELD, _ref => {\n  let {\n    key,\n    value\n  } = _ref;\n  return {\n    key,\n    value\n  };\n});\nexport const writePost = createAction(WRITE_POST, _ref2 => {\n  let {\n    title,\n    body,\n    tags\n  } = _ref2;\n  return {\n    title,\n    body,\n    tags\n  };\n});\nexport const setOriginalPost = createAction(SET_ORIGINAL_POST, post => post);\nexport const updatePost = createAction(UPDATE_POST, _ref3 => {\n  let {\n    id,\n    title,\n    body,\n    tags\n  } = _ref3;\n  return {\n    id,\n    title,\n    body,\n    tags\n  };\n});\nconst writePostSaga = createRequestSaga(WRITE_POST, postAPI.writePost);\nconst updatePostSaga = createRequestSaga(UPDATE_POST, postAPI.updatePost);\nexport function* writeSaga() {\n  yield takeLatest(WRITE_POST, writePostSaga);\n  yield takeLatest(UPDATE_POST, updatePostSaga);\n}\nconst initialState = {\n  title: '',\n  body: '',\n  tags: [],\n  post: null,\n  postError: null,\n  originalPostId: null\n};\nconst write = handleActions({\n  [INITIALIZE]: state => initialState,\n  [CHANGE_FIELD]: (state, _ref4) => {\n    let {\n      payload: {\n        key,\n        value\n      }\n    } = _ref4;\n    return { ...state,\n      [key]: value\n    };\n  },\n  [WRITE_POST]: state => ({ ...state,\n    post: null,\n    postError: null\n  }),\n  [WRITE_POST_SUCCESS]: (state, _ref5) => {\n    let {\n      payload: post\n    } = _ref5;\n    return { ...state,\n      post\n    };\n  },\n  [WRITE_POST_FAILURE]: (state, _ref6) => {\n    let {\n      payload: postError\n    } = _ref6;\n    return { ...state,\n      postError\n    };\n  },\n  [SET_ORIGINAL_POST]: (state, _ref7) => {\n    let {\n      payload: post\n    } = _ref7;\n    return { ...state,\n      title: post.title,\n      body: post.body,\n      tags: post.tags,\n      originalPostId: post.id\n    };\n  },\n  [UPDATE_POST_SUCCESS]: (state, _ref8) => {\n    let {\n      payload: post\n    } = _ref8;\n    return { ...state,\n      post\n    };\n  },\n  [UPDATE_POST_FAILURE]: (state, _ref9) => {\n    let {\n      payload: postError\n    } = _ref9;\n    return { ...state,\n      postError\n    };\n  }\n}, initialState);\nexport default write;","map":{"version":3,"names":["createAction","createActions","handleActions","createRequestSaga","createRequestActionTypes","postAPI","takeLatest","INITIALIZE","CHANGE_FIELD","SET_ORIGINAL_POST","WRITE_POST","WRITE_POST_SUCCESS","WRITE_POST_FAILURE","UPDATE_POST","UPDATE_POST_SUCCESS","UPDATE_POST_FAILURE","initialize","changeField","key","value","writePost","title","body","tags","setOriginalPost","post","updatePost","id","writePostSaga","updatePostSaga","writeSaga","initialState","postError","originalPostId","write","state","payload"],"sources":["/Users/dia_forever_0914/Programming/WebProgramming/NestJSProject/blog/blog-frontend/src/modules/write.js"],"sourcesContent":["import {createAction, createActions, handleActions} from 'redux-actions';\nimport createRequestSaga, {createRequestActionTypes} from '../lib/createRequestSaga';\nimport * as postAPI from '../lib/api/posts';\nimport {takeLatest} from 'redux-saga/effects';\n\nconst INITIALIZE = 'write/INITIALIZE';\nconst CHANGE_FIELD = 'write/CHANGE_FIELD';\nconst SET_ORIGINAL_POST = 'write/SET_ORIGINAL_POST';\n\nconst [WRITE_POST, WRITE_POST_SUCCESS, WRITE_POST_FAILURE] = createRequestActionTypes('write/WRITE_POST');\nconst [UPDATE_POST, UPDATE_POST_SUCCESS, UPDATE_POST_FAILURE] = createRequestActionTypes('/write/UPDATE_POST');\n\nexport const initialize = createAction(INITIALIZE);\nexport const changeField = createAction(CHANGE_FIELD, ({key, value}) => ({\n    key,\n    value,\n}));\nexport const writePost = createAction(WRITE_POST, \n    ({title, body, tags}) => ({\n        title, body, tags,\n    })\n);\nexport const setOriginalPost = createAction(SET_ORIGINAL_POST, post => post);\nexport const updatePost = createAction(\n    UPDATE_POST,\n    ({id, title, body, tags}) => ({\n        id,\n        title,\n        body,\n        tags,\n    })\n);\n\nconst writePostSaga = createRequestSaga(WRITE_POST, postAPI.writePost);\nconst updatePostSaga = createRequestSaga(UPDATE_POST, postAPI.updatePost);\n\nexport function* writeSaga() {\n    yield takeLatest(WRITE_POST, writePostSaga);\n    yield takeLatest(UPDATE_POST, updatePostSaga);\n}\n\nconst initialState = {\n    title: '',\n    body: '',\n    tags: [],\n    post: null,\n    postError: null,\n    originalPostId: null,\n};\n\nconst write = handleActions(\n    {\n        [INITIALIZE]: state => initialState,\n        [CHANGE_FIELD]: (state, {payload: {key, value}}) => ({\n            ...state,\n            [key]: value,\n        }),\n        [WRITE_POST]: state => ({\n            ...state,\n            post: null,\n            postError: null,\n        }),\n        [WRITE_POST_SUCCESS]: (state, {payload: post}) => ({\n            ...state,\n            post,\n        }),\n        [WRITE_POST_FAILURE]: (state, {payload: postError}) => ({\n            ...state,\n            postError,\n        }),\n        [SET_ORIGINAL_POST]: (state, {payload: post}) => ({\n            ...state,\n            title: post.title,\n            body: post.body,\n            tags: post.tags,\n            originalPostId: post.id,\n        }),\n        [UPDATE_POST_SUCCESS]: (state, {payload: post}) => ({\n            ...state,\n            post,\n        }),\n        [UPDATE_POST_FAILURE]: (state, {payload: postError}) => ({\n            ...state,\n            postError,\n        })\n    },\n    initialState,\n);\n\nexport default write;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}